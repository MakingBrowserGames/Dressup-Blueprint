var IntroState=new Kiwi.State("IntroState");IntroState.create=function(){game.states.switchState("PlayState",PlayState,null,{characterParts:{head:0,arms:0,chest:0,legs:0}})};var LoadingState=new Kiwi.State("LoadingState");LoadingState.preload=function(){this.addSpriteSheet("head","assets/img/head.png",150,117),this.addSpriteSheet("chest","assets/img/chest.png",150,117),this.addSpriteSheet("arms","assets/img/arms.png",150,117),this.addSpriteSheet("legs","assets/img/legs.png",150,117),this.addSpriteSheet("CameraBtn","assets/img/buttons/CameraBtn.png",100,100),this.addSpriteSheet("RandomBtn","assets/img/buttons/RandomBtn.png",100,100),this.addSpriteSheet("ResetBtn","assets/img/buttons/ResetBtn.png",100,100),this.addSpriteSheet("NextBtn","assets/img/buttons/NextBtn.png",63,63),this.addSpriteSheet("PrevBtn","assets/img/buttons/PrevBtn.png",63,63),this.addSpriteSheet("BackBtn","assets/img/buttons/BackBtn.png",100,100),this.addSpriteSheet("PrintBtn","assets/img/buttons/PrintBtn.png",100,100),this.addSpriteSheet("SaveBtn","assets/img/buttons/SaveBtn.png",100,100),this.bg=new Kiwi.GameObjects.Sprite(this,this.textures.kiwiImg,390,280),this.addChild(this.bg),this.bg.input.onUp.add(this.pressIntro)},LoadingState.create=function(){game.states.switchState("IntroState")},LoadingState.pressIntro=function(){window.open("http://www.kiwijs.org")},LoadingState.loadProgress=function(){};var PlayState=new Kiwi.State("PlayState");PlayState.create=function(a){this.characterParts=a;var b=0,c=273,d=70,e=0;if(void 0!=a)for(var f in a)this[f]=new Kiwi.GameObjects.Sprite(this,this.textures[f],100,80),this.addChildAt(this[f],0),this[f].name=f,this[f].animation.switchTo(a[f]),this[f+"LeftBtn"]=new Kiwi.GameObjects.Sprite(this,this.textures.PrevBtn,b,e),this.addChild(this[f+"LeftBtn"]),this[f+"LeftBtn"].tag=f,this[f+"LeftBtn"].input.onUp.add(this.pressLeft,this),this[f+"RightBtn"]=new Kiwi.GameObjects.Sprite(this,this.textures.NextBtn,c,e),this.addChild(this[f+"RightBtn"]),this[f+"RightBtn"].tag=f,this[f+"RightBtn"].input.onUp.add(this.pressRight,this),e+=d;this.randomButton=new Kiwi.GameObjects.Sprite(this,this.textures.RandomBtn,0,289),this.addChild(this.randomButton),this.randomButton.input.onUp.add(this.randomizeCharacter,this),this.resetButton=new Kiwi.GameObjects.Sprite(this,this.textures.ResetBtn,118,289),this.addChild(this.resetButton),this.resetButton.input.onUp.add(this.resetCharacter,this),this.showButton=new Kiwi.GameObjects.Sprite(this,this.textures.CameraBtn,235,289),this.addChild(this.showButton),this.showButton.input.onUp.add(this.showCharacter,this)},PlayState.updateCharacter=function(){for(var a in this.characterParts)this[a].animation.switchTo(this.characterParts[a])},PlayState.pressLeft=function(a){var b=this[a.tag];0==b.animation.frameIndex?this.characterParts[a.tag]=b.animation.currentAnimation.length-1:this.characterParts[a.tag]--,this.updateCharacter()},PlayState.pressRight=function(a){var b=this[a.tag];b.animation.frameIndex==b.animation.currentAnimation.length-1?this.characterParts[a.tag]=0:this.characterParts[a.tag]++,this.updateCharacter()},PlayState.randomizeCharacter=function(){for(var a in this.characterParts){var b=this[a],c=Math.floor(Math.random()*b.animation.currentAnimation.length);this.characterParts[a]=c}this.updateCharacter()},PlayState.resetCharacter=function(){for(var a in this.characterParts)this.characterParts[a]=0;this.updateCharacter()},PlayState.showCharacter=function(){game.states.switchState("ShowState",ShowState,null,{characterParts:this.characterParts})};var Preloader=new Kiwi.State("Preloader");Preloader.preload=function(){this.addImage("kiwiImg","assets/img/loadingImage.png")},Preloader.create=function(){game.stage.resize(340,400),game.states.switchState("LoadingState")};var ShowState=new Kiwi.State("ShowState");ShowState.create=function(a){if(this.printing=!1,this.capturing=!1,this.characterParts=a,void 0!=a)for(var b in a)this[b]=new Kiwi.GameObjects.Sprite(this,this.textures[b],100,80),this.addChildAt(this[b],0),this[b].animation.switchTo(a[b]);this.printButton=new Kiwi.GameObjects.Sprite(this,this.textures.PrintBtn,0,289),this.addChild(this.printButton),this.printButton.input.onUp.add(this.printImg,this),this.saveButton=new Kiwi.GameObjects.Sprite(this,this.textures.SaveBtn,118,289),this.addChild(this.saveButton),this.saveButton.input.onUp.add(this.saveImg,this),this.backButton=new Kiwi.GameObjects.Sprite(this,this.textures.BackBtn,235,289),this.addChild(this.backButton),this.backButton.input.onUp.add(this.goBack,this)},ShowState.printImg=function(){this.printButton.visible=!1,this.saveButton.visible=!1,this.backButton.visible=!1,this.printing=!0},ShowState.saveImg=function(){this.printButton.visible=!1,this.saveButton.visible=!1,this.backButton.visible=!1,this.capturing=!0},ShowState.postRender=function(){if(this.printing){var a=this.game.stage.canvas.toDataURL(),b="<!DOCTYPE html>";b+="<html>",b+="<head><title>Your Dress Up</title></head>",b+="<body>",b+='<img src="'+a+'">',b+="</body>",b+="</html>";var c=window.open("","","width=1280,height=960");c.document.open(),c.document.write(b),c.document.close(),c.focus(),c.print(),c.close(),this.printButton.visible=!0,this.saveButton.visible=!0,this.backButton.visible=!0,this.printing=!1}if(this.capturing){var d=this.game.stage.canvas.toDataURL("image/octet-stream");window.open(d,"toDataURL() image","width=1280, height=960"),this.printButton.visible=!0,this.saveButton.visible=!0,this.backButton.visible=!0,this.capturing=!1}},ShowState.goBack=function(){game.states.switchState("PlayState",PlayState,null,{characterParts:this.characterParts})};var game=new Kiwi.Game("content","DressUpGame",null,{renderer:Kiwi.RENDERER_CANVAS});game.states.addState(Preloader),game.states.addState(LoadingState),game.states.addState(IntroState),game.states.addState(PlayState),game.states.addState(ShowState),game.states.switchState("Preloader");